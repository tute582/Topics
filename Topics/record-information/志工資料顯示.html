<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>志工資料顯示</title>

  <style>
    /* ======== 基本頁面樣式 ======== */
    body {
      font-family: "Arial", sans-serif;
      background: #f4f6f8;  /* 淡灰背景 */
      margin: 0;
      padding: 0;
    }

    /* ======== 卡片外觀設定 ======== */
    .card {
      max-width: 720px; /* 最大寬度 */
      margin: 24px auto; /* 置中 */
      background: #fff;  /* 白底 */
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08); /* 陰影 */
      text-align: center;
    }

    h1 {
      margin: 0 0 0 0;
      font-size: 28px;
    }

    /* ======== 頭像樣式 ======== */
    .avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;  /* 圓形頭像 */
      object-fit: cover;   /* 等比例裁切 */
      border: 3px solid #0078d4; /* 藍色外框 */
      margin-bottom: 0px;
    }

    /* ======== 個人資料清單 (dt/dd) ======== */
    dl {
      display: grid;  /* 使用grid分成兩欄 */
      grid-template-columns: 140px 1fr; /* 左欄標題 右欄內容 */
      gap: 8px 16px;  /* 行間與欄間距 */
      text-align: left;
      margin-top: 10px;
    }
    dt {
      font-weight: 700;
      color: #333;
    }
    dd {
      margin: 0;
      color: #222;
      word-break: break-word; /* 自動換行防止溢出 */
    }

    /* ======== 返回按鈕 ======== */
    .back {
      display: inline-block;
      margin-top: 20px;
      padding: 8px 14px;
      background: #0078d4;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
    }

    /* ======== 無資料提示文字 ======== */
    .empty {
      color: #666;
    }

    .tag-display {
    display: inline-block;
    background: #e8f5e9;
    color: #2e7d32;
    border: 1px solid #c8e6c9;
    border-radius: 12px;
    padding: 4px 10px;
    margin: 4px 6px 0 0;
    font-size: 14px;
    white-space: nowrap;
    }


    /* ======== 導覽列樣式 ======== */
    .nav-1 {
      display: flex;                 /* 水平排列內容 */
      font-weight: bold;
      align-items: center;           /* 垂直置中 */
      justify-content: space-between;/* 左右兩邊對齊 */
      padding: 10px 25px;
      position: sticky;              /* 滾動時固定頂端 */
      top: 0;
      z-index: 1001;                 /* 保持在最上層 */
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      width: 100%;
      left: 0;
      right: 0;
      color: black;
      background-color: white;
      box-sizing: border-box;        /* 避免padding撐爆 */
      border-bottom: 1px solid #ddd; /* 下邊界線 */
    }
  </style>
</head>
<body>

  <!-- ======== 導覽列區塊 ======== -->
  <nav class="nav-1">
    <div>
      <h1>志工個人資料</h1>
    </div>

    <div style="display:flex; align-items:center;">
      <h1 style="margin:0; text-align:right;">
        <span class="volunteer-area" style="display:flex; align-items:center; gap:8px;">
          <!-- 導覽列頭像（小尺寸） -->
          <img id="volunteerAvatar" class="avatar" 
               src="default-avatar.png" alt="avatar"
               style="width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #0984e3;">
          <!-- 志工名稱或登入提示 -->
          <span id="volunteerName" title="點此以 Line 登入" style="cursor:pointer;">未登入</span>
        </span>
      </h1>
    </div>
  </nav>

  <!-- ======== 主卡片內容區 ======== -->
  <div class="card">
    <!-- 大頭貼（主要展示） -->
    <img id="avatar" class="avatar" src="default-avatar.png" alt="使用者頭像">
    <!-- 志工詳細資料將動態插入此處 -->
    <div id="content"></div>
    <!-- 返回填寫頁面連結 -->
    <a class="back" href="註冊頁面.html">回到填寫頁</a>
  </div>

  <!-- ======== JavaScript 資料載入區 ======== -->
  <script>
    // 取得 HTML 元素
    const content = document.getElementById('content');           // 顯示詳細資料的容器
    const avatarPreview = document.getElementById("avatar");      // 卡片頭像
    const volunteerAvatar = document.getElementById("volunteerAvatar"); // 導覽列頭像
    const volunteerName = document.getElementById("volunteerName");// 導覽列名稱

    // 從 localStorage 取得上次儲存的志工資料
    const raw = localStorage.getItem('lastVolunteer');

    // 若沒有資料
    if (!raw) {
      content.innerHTML = '<p class="empty">目前沒有任何使用者資料。</p>';
    } else {
      try {
        // 將 JSON 字串轉回物件
        const d = JSON.parse(raw); // 單一物件格式

        /* ======== 設定頭像 ======== */
        const avatarUrl = d.avatar && d.avatar.trim() !== "" ? d.avatar : "default-avatar.png";
        if (avatarPreview) avatarPreview.src = avatarUrl;   // 主卡片頭像
        if (volunteerAvatar) volunteerAvatar.src = avatarUrl; // 導覽列小頭像

        /* ======== 設定名稱 ======== */
        if (volunteerName) volunteerName.textContent = d.name || "未登入";

        /* ======== 顯示詳細資料 ======== */
        avatar.src = d.avatar && d.avatar.trim() !== "" ? d.avatar : "default-avatar.png";
        const html = `
          <dl>
            <dt>志工代碼</dt><dd>${d.volunteerId || ''}</dd>
            <dt>姓名</dt><dd>${d.name || ''}</dd>
            <dt>電子郵件Email</dt><dd>${d.email || ''}</dd>
            <dt>連絡電話</dt><dd>${d.phone || ''}</dd>
            <dt>出生年月日</dt><dd>${d.birthday || ''}</dd>
            <dt>性別</dt><dd>${d.gender || ''}</dd>
            <dt>地址</dt><dd>${d.address || ''}</dd>
            <dt>簡介</dt><dd>${d.desc || ''}</dd>
            <dt>服務特質</dt>
            <dd>
              ${
                Array.isArray(d.tags)
                  ? d.tags.map(tag => `<span class="tag-display">${tag}</span>`).join('')
                  : (d.tags || '')
              }
            </dd>
            <dt>簡介</dt><dd>${(d.desc || '').replace(/\n/g,'<br>')}</dd>
          </dl>
        `;
        // 將產生好的 HTML 插入網頁中
        content.innerHTML = html;

      } catch (e) {
        // 若 JSON 格式錯誤或解析失敗
        content.innerHTML = '<p class="empty">資料解析錯誤。</p>';
        console.error(e);
      }
    }
  </script>
</body>
</html>
